name: Build and Publish Python Wheels (Dev)

on:
  push:
    branches:
      - "main"
  pull_request:
    branches:
      - "main"

concurrency:
  group: build-python-dev
  cancel-in-progress: false

jobs:
  build-dev:
    name: Build Dev
    uses: ./.github/workflows/build-python-wheels.yml
    permissions:
      contents: read
    with:
      dev_version: true

  publish-dev:
    name: Publish Dev
    uses: ./.github/workflows/publish-python.yml
    if: ${{ github.event_name == 'push' && github.ref == 'refs/heads/main' }}
    needs: build-dev
    permissions:
      contents: read
      id-token: write
    with:
      release_type: "Dev Release"
